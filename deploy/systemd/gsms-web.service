# deploy/systemd/gsms-web.service

[Unit]
Description=GSMS FastAPI (Uvicorn 127.0.0.1:8001)
After=network-online.target
Wants=network-online.target

[Service]
User=gsms
Group=gsms
WorkingDirectory=/opt/gsms/app
# Variables llegan por drop-in env.conf

# La línea ExecStart corregida para ser más segura
ExecStart=/opt/gsms/venv/bin/uvicorn src.main:app --host 127.0.0.1 --port 8001 --proxy-headers --forwarded-allow-ips='127.0.0.1'

Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target