# ============================================
# Alembic Configuration File
# GSMS Backend - Database Migrations
# ============================================

[alembic]
# Path to migration scripts
script_location = %(here)s/alembic

# Prepend sys.path with current directory
prepend_sys_path = .

# Path separator (uses OS default)
path_separator = os

# ====================================================
# Database URL Configuration
# ====================================================
# NOTE: This is overridden in alembic/env.py using settings from .env
# Leave this empty to ensure env.py always controls the connection
sqlalchemy.url = 

# ====================================================
# Post-Write Hooks (for code formatters, linters, etc.)
# ====================================================
[post_write_hooks]
# Example: Auto-format migration files with black
# hooks = black
# black.type = console_scripts
# black.entrypoint = black
# black.options = -l 100 REVISION_SCRIPT_FILENAME

# ====================================================
# Logging Configuration
# ====================================================
[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

# ====================================================
# Logger: Root
# ====================================================
[logger_root]
level = WARNING
handlers = console
qualname =

# ====================================================
# Logger: SQLAlchemy (Database Query Logs)
# ====================================================
[logger_sqlalchemy]
level = WARNING
handlers =
qualname = sqlalchemy.engine
# Change to INFO to see SQL queries in console
# level = INFO

# ====================================================
# Logger: Alembic (Migration Logs)
# ====================================================
[logger_alembic]
level = INFO
handlers =
qualname = alembic

# ====================================================
# Handler: Console Output
# ====================================================
[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

# ====================================================
# Formatter: Generic
# ====================================================
[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S

# ====================================================
# Usage Instructions
# ====================================================
# 1. Create new migration:
#    alembic revision --autogenerate -m "Migration message"
#
# 2. Apply migrations:
#    alembic upgrade head
#
# 3. Rollback one migration:
#    alembic downgrade -1
#
# 4. View migration history:
#    alembic history
#
# 5. View current database version:
#    alembic current
#
# ====================================================
# Notes
# ====================================================
# - Database URL is read from .env file via alembic/env.py
# - DO NOT hardcode database credentials here
# - See alembic/env.py for connection configuration